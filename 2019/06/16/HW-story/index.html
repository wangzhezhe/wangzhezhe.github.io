<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>HW story | Wangzhezhe&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="HW Story （大概写在17年）">
<meta property="og:type" content="article">
<meta property="og:title" content="HW story">
<meta property="og:url" content="http://yoursite.com/2019/06/16/HW-story/index.html">
<meta property="og:site_name" content="Wangzhezhe&#39;s Blog">
<meta property="og:description" content="HW Story （大概写在17年）">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-30T15:40:29.124Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HW story">
<meta name="twitter:description" content="HW Story （大概写在17年）">
  
    <link rel="alternate" href="/atom.xml" title="Wangzhezhe&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Wangzhezhe&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Writing is nature&#39;s way of letting you know how sloppy your thinking is.</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-HW-story" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/16/HW-story/" class="article-date">
  <time datetime="2019-06-16T22:02:27.000Z" itemprop="datePublished">2019-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/story/">story</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      HW story
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>HW Story （大概写在17年）</p>
<a id="more"></a>
<p>5.20</p>
<p>都已经5月了啊，很有纪念意义的一天，story系列还是再写起来吧。上周是挺忙的，这周明显感觉是划水的一周，和在实验室呆着差不多，也没有什么实际的产出，总体感觉心里有点虚，因为并不是拿了一分钱出了一分力。之前听的鸡汤文中讲，如果想要得到50分的激励就需要给公司创造100分的利润，而自己目前确实完全相反，有点压力还有点迷茫。有时候又想想，自己毕竟待不了那么久，踏踏实实地做好眼前的事情看到实实在在的进步就行了，何必瞻前顾后想那么多。</p>
<p>hw有自己独特的企业文化，这种文化的一个有趣的方面就是所谓的“行话”，会不会说行话大概是你是不是圈里人的一个“标志”了，事实上有时候你不知道这些行话是啥意思，都不知道那些老司机在讲什么。</p>
<p>“知会”： 在我看来，“知会”是一个满文艺的词或者说是蛮官方的词，文绉绉的，比如这个需求要“知会”到相关的兄弟部门，等等。所有的，说，通知，告诉，这种表述全都可以用“知会”这个词来替代，可能台湾腔的话这个词用的多一些，在公司里，你跟人家讲，“这个需求变化要知会到相关人员”的时候，仿佛自己一下子变得有文化了。但是有一种有趣的表述是“知会到相关部门的兄弟”，一个比较正式的“知会”和一个比较有江湖气息的“兄弟”两个词放在一起，还是挺有趣的。</p>
<p>“家里”： 经常听到老司机们说，“家里”怎样怎样，“外面”怎样怎样，听起来帮派气息十足，比如把这个版本的代码从“家里”带过去，在“家里”的时候怎样，在外面的时候要怎样。感觉大家就像是梁山好汉一样，大家在家里都是兄弟，兄弟部门，隔壁的组的兄弟，兄弟们都辛苦了，等等，真想问问那些程序媛们听了会有怎么样的感受。</p>
<p>“局点”与“开局”：局点本来是一个体育术语，大概就是说到了决定胜负的关键时刻，有的产品是要拿出去做一个“开局”，还有些产品是要拿出去拿下“局点”。每当老大说这个产品要拿去某某公司去开局或者说是做局点，就感觉看来这个玩意儿还挺重要。</p>
<p>“胶片”：不知为何在公司里大家管ppt都叫“胶片”，听起来很有历史感和沧桑感，总之就是，讲究！就像之前在大武汉的时候，只有年轻的学生们才把”华中科技大学“称为”华科“，那些老教授们都是一口一个”华工“。</p>
<p>“再搞一把”：调bug最大一个错觉就是忙目地以为”再搞一把“就会有奇迹出现，大家就是爱折腾，搞了一把又一把，bug还是不见好。实际上说搞一把的时候，多半有些调侃的味道，或者说是对于当前bug的无可奈何，只能搞一把试试了，成了当然好，成不了，那就再来几把。。。</p>
<p>”需求要往下落“：就是说要把需求一步一步推进，一步一步付诸实践，”落“这个词其实用的挺妙，毕竟只有真正落到地上，接了地气，这需求才能活起来。</p>
<p>“归档”，归档是个很有意义的事情，仿佛值自己给自己定的一个小目标，虽然不一定有客户用，但是档还是照样要归的。</p>
<p>“有问题解决问题，不要发散问题” 其实还蛮喜欢这种做事的态度，好多时候特别是涉及到组与组之间协作的时候，大家往往就是推脱与甩锅，有些比较喜欢借题发挥的人，更是喜欢把问题上纲上线。比如某个功能出现了问题，可能稍微使用几个命令行，解决一下就好了，但是如果上纲上线的话，就可以说是架构不给力，测试不具体等等。其实后面的这种牢骚对于解决问题的并无太大的益处，程序员都比较实在，架构不给力这种模糊的牢骚只能是增加人的负面情绪和厌烦的感觉。不要发散问题就是一种就事论事，聚焦主要问题的态度，因为发散出去的问题要么是牢骚，要么是一下子无法解决掉的。</p>
<p>凭心而论IT的工作并不是那么的”饱和“，好多时候连自己也不知道自己在干什么。但是毕竟是公司给工资，也不好意思做些和工作无关的事情。闲的时候我喜欢看隔壁组的那个说话声音很好听的程序媛小姐姐提交的pr，公司里的程序媛虽然不多，但也并没有像网上传说的那么少，中午去食堂吃饭的时候也常常是目不暇接。其实心里还是佩服的，人家也一样提pr，修bug，弄的清网络模型，优化的了算法，但是也没见人家头发乱糟糟，袜子几天不换（貌似她们夏天都不怎么穿袜子吧）。偶尔会在吃饭或者上下电梯的时候碰见，每次都心说，下次碰见要不打个招呼，说声”嗨，你好啊，我经常看你提的pr“，有觉得自己好笑，怎么会有人这样打招呼。</p>
<p>5.25</p>
<p>大家工作还真是很拼，比如今天9点半走的时候，小组里面的其他同事都还没有走的意思。看起来大家都很拼命，可我感觉产出却不怎么行，好多事情白白地消耗在了配置或者服务打包的工作上面，比如一些可有可无的错误，而并非是真正意义上的功能开发。比如这么久的时间了，连个像样的CI都没有，那些老司机们总在打电话，奇怪他们怎么有那么多的事情。在公司还有一个好处就是总觉得时间过的特别快，比如调一个bug，改几行代码，打打包，测试测试，一上午就过去了。有的时候需要跳出来宏观地看看，自己到底在做什么，是在瞎折腾呢，还是在做真正有价值的事情。唯一觉得有点无聊的时光就是晚上回来，感觉这是唯一自己的时光，想做点什么有意义事情，但是又有点累，无聊无聊，刷刷手机看看微信就到12点了。我觉得关键还是自己想得太多，又想做这个又想做那个，干脆从明天开始就定下来，晚上的时间就做一件或者两件事情，每天都一样，然后坚持个一两个星期，这样试试看。</p>
<p>5.26</p>
<p>晚上回来的时候看见街上来来往往的行人特别有感触，滨江区是一个充满活力的地方，年轻人很多，常常能看见情侣们手牵着手，有的时候是一家三口，父母接送放了学的小朋友，或者是同我年龄相似的青年们。今天年吃完饭回来，听见旁边的小朋友对她爸妈说，“我是属马的”，然后自己多少有点恍惚。我觉得国内范围来看或许很难找到比这里更好的地方了，江边风景，江对面是西湖，南边是湘湖，东边的以后的亚运会会场。说实话要是能找一个相爱的人安安稳稳的在这里过日子我觉得也挺好的。但是每到这个时候就会转念一想，既然有一个机会能去看看更外面的世界，为什么不出去看看呢？虽然我知道，有很大的可能出去看了一圈回来之后，发现还是这里好，但是即使是这样，想想当初走过的路和花掉的时间我也不遗憾，不要忘记了自己最初的想法。</p>
<p>每天回来我都会骑自行车路过一条名叫长河的河（实际是西塘河），一般只有周五的晚上不会加班，这个时候回来天还亮着，我会习惯性地向西边看，有的时候会看到赤红色的太阳在高楼中间，缓缓落下，有的时候会看到一弯淡白色的月亮悬挂在天中，长河落日圆，长河弦月弯，然后再抬起头看看江对面的滚滚红尘，心想一周又要过去了。</p>
<p>5.31</p>
<p>都31号了，还在等。端午就过去了，我还记得去年端午时候的场景，在实习单位，那时候发两个粽子，然后和同寝的朋友们一起吃。如今一年过去了，日子不好也不差，我有的时候还是会想一下Erin就像一个good old story，但是缘分只有那么一点，谈及感情的问题总是让人不那么好受，都这么长时间了，可能也就这样了吧。休息的时候有空闲，练了一下琴，发现以前熟悉的一些曲子现在都变得陌生了，练琴这种事情是最实在的了，几天不练，生疏的下不了手。想起当初在艺术团排练的时候羡慕那些老师和同学们的心情，说实话和他们在一起感觉自己就像是一个傻逼一样，有的时候听不懂他们讲的那些关于乐团排练的笑话，对于我来说能认识他们已经是很幸运的了。我有的时候看看自己的手，总觉得指头这么短，还弹什么琴，后来又想，就算指头长又怎样，反正就是看起来好看点，也成不了钢琴家什么的。况且又不是说指头短到连八度都够不到，都是自己给自己找理由罢了。平心而论，自己的确是喜欢的，但是这个东西坚持练下来确实有难度，不管简单还是复杂的曲子，练到能在别人面前表演一下的程度，都是不容易的，况且大多时候都是自己在练习，可能还走挺多弯路。但是练习的时候确实能让我感到放松愉悦和快乐，我想自己还是纯粹一点，不要那么功利。总还是要有点追求的吧，就像那句老话说的，连一个东西最好的时候是十年前，和现在，其实话说回来，自己开始练琴是在20年前吧，可那个时候多是跟风罢了，父母也花了不少精力，但是自己不争气，也不懂，没成，半途而废了。十年前的思绪是什么样，我还是记得的，弹琴像是心中的一个伤疤，在电视上看到别人在弹，还是羡慕的，也不好意思跟人家讲，自己学过琴啥的，其实不过是仅仅会弹个右手的旋律罢了，就连左手的和弦是啥也都不知道。有的时候发呆的时候手在那里比划，寻思着这辈子可能跟弹琴就没什么关系了吧。至于后来，我也不不知道自己怎么就捡起来了，虽然学习的很慢，但是总算是捡起来了。有的时候事情有点多或者自己心里懈怠，就断着没有练，我写这一篇就是在告诉自己，既然都决定要捡起来了，就别放弃，话说那些时间用在别的地方也并不是什么有意义的事了。确实有的时候是枯燥的，总要强迫着自己踏出舒服圈才能进步，在练习的时候要主动找自己的边界，找到边界在哪，然后去扩大这个边界，虽然有的时候确实感到tough，但这个才是提高的过程。隔了这么久，圈圈绕绕又回到了这条路上，就别让自己感到后悔了。</p>
<p>6.1</p>
<p>check的状态变成issued了，心说老美还挺幽默，这是要给我一个6.1礼物吗？心情还挺激动，也不知道跟谁讲。先让我高兴会儿，别的事情等明天再说，哈哈哈！高兴的吃了个粽子还有一咸鸭蛋。</p>
<p>公司最近鼓励新员工早回去，总有种受宠若惊的感觉。。。</p>
<p>6.10</p>
<p>想说说公司里带我的导师，用一句话总结的话，我的导师就是一只幸福又充满智慧的萌萌的racoon，按照传统不应该叫导师而是应该叫师傅的，可我总是觉得叫师傅很别扭，仿佛是旧社会的叫法，我们这好歹也算是高新企业吧，况且叫的太亲密会显得不怎么好意思，但是实际上我也总是向他请教各种问题，也是理所当然的师傅。</p>
<p>我的师傅每天都拿一个精致的手提的小袋子到公司里，标配是一个苹果加一个酸奶再加一盒牛奶，整齐的排列在手提袋中。在这种生活很糙的IT工程师群体中算是很特别的。师傅晚上的时候从来不和我们一起吃饭，总是说你们先去吧，有一次我吃完饭回来看到他提着一箱牛奶和师母一起并肩走着去食堂。</p>
<p>中午吃饭的时候他总是把鞋后跟踩在脚下一拖一拖的当拖鞋穿，周围的同事们围着他各种请教问题，想必和师母在一起吃完饭的时候他不这样吧。中午睡觉的时候他用被子把全身裹住，就露出一个脑袋，像个蚕宝宝，他基本上每天睡觉都打呼噜，还常常在亮灯之后赖在床上不愿起来。</p>
<p>师傅讲话爱在末尾带一个“嘛”或者“么”，比如”那这样怎么办嘛“，在加上他本来看起来就很萌，又是小组里的技术专家，讨论问题的时候别人都不好意思和他吵了。虽然很萌的人通常看起来很亲切让人感到平易近人，但是他还是很有自己的原则性的。提到原则性常常让我想到亮哥，代码里的空行，无用注释，甚至你觉得无关紧要的小细节他都认真的review，不达标的话他是坚决不会合pr。平易近人的一点就是他总是很愿意帮助别人解决各种技术问题，你说这个代码，那个功能搞不定，他忙完自己的事情总会在问你一下，最后怎么样了。调试代码的时候胖胖的手指操作各种快捷键游刃有余，总是能发现奇葩问题的症结所在然后很快搞定bug。</p>
<p>前几个月的时候师傅得了一个儿子，也是萌萌的大脑袋，师傅常常在微信里晒他的儿子，比如说当完奶爸就要去加班了之类的，于是他也成为了我心目中最幸福的人群中的一员。</p>
<p>6.11</p>
<p>今天下午睡得有点多了，晚上也不怎么困，看到jyj的微信，又忍不住伤感念旧起来，物是人非，一张张照片记录着快乐的时光。想想过去的人，似乎又飘来了hn的夏天的味道。之前不知道为什么那么在乎jj，现在一看照片恍然大悟，原来我们连门牙都长得一样，门牙旁边的两个牙凹陷回去的方式都一样，笑起来都是一样傻，想想好久没联系了，希望小孩老人们都顺顺利利。自己也得给自己提个醒，做事的时候还是按照时间段来，今天虽然时间多，但是任务也是零零散散的完成，还是做事情的计划上没有按照时间段来排，这样不好。</p>
<p>6.12</p>
<p>今天一整天都在跟证书较劲，证书的事情本来就很复杂了，公司里的证书材料还被加密过，加密之后还经过了base64的编码。仔细回忆起来，好多时候都是在敲重复的命令所有感到心烦。明天过去的第一件事是编写脚本，把流程清清楚楚地写出来，人写脚本，机器执行，人不要重复的事。原理什么的自己都是清楚的，就是差了一点细心。</p>
<p>这两天晚上回来就想再床上躺着，什么也不想干。白天的时候做事情也不怎么有效率。</p>
<p>6.13</p>
<p>今天挺忙，主要是因为一个老员工休息，他的一些任务让我做了，感觉是满负荷运转了，主要是有好多背景信息不知道，到是有一些感想。</p>
<p>脚本习惯，要有把常见操作整理成为脚本的习惯，可以给自己立一个flag在这里，不敲重复的命令，在第一次做事情的时候就将流程整理出来，然后稍后整理成可运行的脚本。至于脚本，也不要希望说它有多自动化，关键是要写清楚脚本的限制以及脚本实现的效果，比如脚本需要传入哪些参数以及希望脚本在哪个目录下运行。</p>
<p>关于测试用例，好的测试用例相当于是对函数使用的自我说明以及函数运行正常的一个证明，拿基本的刷题来讲，只有通过测试用例才能算是accept。同样的道理，在自己的项目中为什么就那么随意呢，仅仅考虑一些最基本的情况，比如现在的代码，质量上真是不敢恭维，所有的小错叠加在一起就使得项目混乱，最终导致失控，如果一个一个测试叠加起来，就会使得项目可控，这也是为什么开源项目那么大的代码量还能正常运行的原因。</p>
<p>所以明天去公司还是把自己新加的一点函数的测试代码补上吧，最起码不能让代码失控从我这里开始。同时还把那些零散的操作整理成脚本传到自己的库上吧。</p>
<p>那些写了测试用例的代码我自己是很有信心的，反之确实不敢打包票，继续向外扩展的时候出了问题定位起来也很困难。对于有外部依赖的功能，一句话，总能找到合适的方法进行fake操作，要学会找出边界在哪里，同时要学会通过分而治之将任分开，是客户端的问题还是内部逻辑的问题，这些运行的时候虽然连在一起的，但测试的时候完全是可以分开进行的。写测试的过程也是让自己明白输入输出以及代码运行效果的过程。</p>
<p>比如看了k8s的不同模块的单元测试以及e2e测试之后，好多函数和模块的功能就很清晰了，参考e2e test，自己也可以很容易地写出一些场景的代码使用，而且是完全按照k8s的风格来进行。好的代码是可以自我解释的。</p>
<p>6.18</p>
<p>今天是个好日子，又6又8的。</p>
<p>上周有些沮丧，一个老员工休息，接手他的任务，折腾了好久，主要是有一些基本的概念不清楚，导致出了问题的时候不知道如何定位。涉及到的都是一些I层相关的信息，一谈到I层的事情似乎就又回到了研一时候的时光，充满青涩与惆怅。</p>
<p>avalibility_zone，可用域的概念可以理解成一系列物理机的集合，用户可以指定将自己的VM创建在某个az上：Availability zones are handy for allowing users to specify a particular group of servers on which they want their host to run。</p>
<p>dataStore，这个是这边fc的一个概念，表示存储池。（这个存储池是一个物理机还是几个物理机？）总之应该是比fc更细粒度的一个概念。</p>
<p>镜像，用户volume，系统盘。一个镜像就是一个虚拟机的快照，这样说来在把镜像启动成实际可以运行的虚拟机的时候就会默认带一个系统盘，这个系统盘不是单独创建的而是镜像中本身带有的。所以启动镜像的时候要明确这个镜像要求的系统分区有多大。比如镜像本身大小是2g但是它要求的系统分区有100g，这个时候启动镜像的物理机上如果没有&gt;100g的硬盘，镜像是启动不起来的。</p>
<p>关于flavorid与镜像本身的系统盘的大小。如果镜像支持自动扩容，在openstack中就是cloud-init的概念，这里仅仅是概念性的介绍。如果镜像本身要求的系统分区是50g，之后在启动的时候传入的flavor中的disk大小是100g，此时如果支持自动扩容，那启动起来的镜像就有100g的系统盘，如果不支持自动扩容，启动起来的镜像还是系统镜像本身所要求的100g。</p>
<p>这里要明确的是：for an image, size of disk is determined when you create the image. the vm will resize it’s partition on boot to match the size requested by user when disk in flavor exceeds the image created and the image support the partition resize automatically.</p>
<p>但是要注意一点，如果flavor中的disk参数指定的比镜像中本身默认的分区要求还要小，这个时候启动VM的时候会报错。</p>
<p>关于组内编排服务这边本身的逻辑，创建vm与创建volume。在aos这边，逻辑上是首先创建vm再创建volume，并且volume会被创建在和vm所在的同一个的节点上（这个具体创建在哪个节点上的逻辑是k8s负责的？）。因此在参数上，创建vm的properties只需要指定az与dataStore，创建volume的时候这个volume中如果不指定dataStore参数的话，会被自动创建在和vm相同的节点上。</p>
<p>6.20</p>
<p>回来只想躺在床上听歌，日子过去一天又一天。我曾想，每天用到的最多的明明是grep，grep用的文本查找算法到底是什么，为什么grep那么高效。</p>
<p>6.30</p>
<p>有的时候会想想读phd的事情，一封一封的welcome的邮件告诉你这次不是闹着玩，是来真的。在想，在公司的时候大家都在一条船上，有有经验的领航者，你只要做好自己的工作，就能跟着大船驶向远方。去读phd，仿佛就是自己驾一艘小船，航行在大海上，可能有未知的岛屿，但是也有一无所获的风险，可能要去搜寻那些从来没有人探索过的领域。</p>
<p>7.26</p>
<p>日子过得很快，最近对专业素养几个字特别有感触，简单说起来，就是自己太不专业了。总结一下有两点，一个是严格按照已有流程处理问题的能力另一个是分析定位之前未出现过的问题的能力。</p>
<p>严格按照已有流程处理问题特别体现在CI的操作流程上。首先要承认自己不是神，所以要求自己一次性把代码写到100%正确是不切实际的。没有验证过的代码，没出问题算是运气好，出了问题算是自作自受。问题越早暴露出来，解决问题的成本就会越低。自己在开发环境上测试时候暴露出的问题在解决的时候自然要比跑CI的时候才暴露出来的问题的成本低上好多。</p>
<p>好多时候和别人一起调测环境，别人对你的态度总不是太好。特别是我们这边的一个组，所谓有知识没文化就是说的他们，有的时候你常常在心里说，really fuck you! 但是回过头来想一想，自己的组也给别人留下了好多坑，哪管好用不好用，兼容不兼容，或许别人在心里也是这样说我们，于是想想就算了，毕竟抱怨是解决不了问题的。</p>
<p>抛开一些产品的和做事情的态度不谈，说说自己的问题。解决问题的能力有没有，一个环节一个环节定位问题的能力有没有。比如今天遇到一个 connection refused 的问题，结果最后发现是ip填错了，两个认证的ip弄混了。遇到问题的时候就特别容易陷进去，这个时候最应该做的不是蛮力尝试各种或许可能的结果期待奇迹发生，而是静下心来考虑考虑各种可能的原因。比如connection refused就几个环节，ip是否正确，网络是否通畅，然后对应的服务的端口是否打开。有的时候自己总是无法做到客观对待问题，比如一个问题发生的时候总是动不动地就说这个大概是网络的原因导致的，然后急着将问题推出去，这个时候往往忘记了自己的原因，就是调用的ip或者填写的端口有问题。排查完ip的问题，再看服务端口是否打开，最后再看网络的问题，定位网络的问题，手段其实也很简单，除了ping就是curl，多试几次看看时延。但是大多情况下其实都是由于参数的填写错误导致的。</p>
<p>总之对于使用已有支持解决未知问题的场景</p>
<p>1 切记不要自以为是，要客观地对待问题<br>2 切记要跳出问题，梳理整个问题的上下游，一个环节一个环节地排查问题</p>
<p>8.3</p>
<p>算是在jc的最后一天了，感觉还没来得及告别就又要走了，回头想想，总觉的自己没做什么特别有价值的事情。曾经有有句话这么说，你要是希望能挣100万的工资，那你就需要给老板创造1000万的效益。平心而论，自己感觉并没有做到位，也没有创造出那么多的效益来，到后期虽然有时候有一些好的想法，但是一考虑到，反正自己都要走了，就没有很好的贯彻下去。回头整理整理这几个月以来自己做的事情以及一些得失。</p>
<p>看代码</p>
<p>看的代码主要是aos的项目代码以及cfe的项目代码，说白了还是k8s本身的代码。在工作压力以及具体问题的推动下，看代码的效率就会高好多，除了组内之前员工写的代码，比如各种graph以及依赖关系的处理，组内的各个组件的业务的实现，还有k8s的有些代码看起来也似乎慢慢的掌握了一些门道，比如util库中的各种缓存，比如对象之间的各种转换机制，还有api的group以及version的机制，这些都要在以后的时间慢慢整理出来。24寸的高清屏幕看起代码来也确实是特别爽。</p>
<p>问题支撑</p>
<p>其实更多时间都花费在了问题的支撑上，自己是接口人之一，各种使用本组服务的同事，测试，都会过来询问问题，在加上公司的即时通信工具实在是太方便了，特别是测试的妹子们，一言不合就要和你共享屏幕。具体支撑的问题可以分成两类。</p>
<p>一种是功能已知比较具体的问题，比如某一个已知的功能在运行的时候出了一个问题，报了一个什么样的错误，这个时候别人来找你说要定位一下，然后怎样帮他解决，这个时候一般是参数填错了，或者是网络环境不稳定（极少情况下会遇到一些新的场景然后触发了一些已知的bug）<br>另一种是功能未知的问题，这种问题往往对能力和经验要求比较高，比如你们的产品是否支持某种某种的运行方式，你们的产品在某种某种场景下应该怎样使用，等等。<br>第一种问题刚开始解决起来感觉比较有成就感，似乎是说帮别人解决了一个问题，可是越往后越发现，自己是在做一些重复的问题（看日志-&gt;定位代码行数-&gt;看代码-&gt;找问题）。有的时候功能出现问题是由于参数填写错误导致的，有的时候是由于新的版本的发布引入的新问题导致的，这种情况下大家最常说的就是，上个版本还可以啊?这个版本怎么就不行了。这种问题到是多少也能有些启发，比如日志的输出是否友好，是否能通过日志很快定位到问题产生的地方。为什么某一类的问题总是很容易犯等等，是不是代码在这块规划的时候本来就不太友好？或者考虑的不够到位。</p>
<p>第二类的问题往往是架构师回答起来比较给力，这也正式架构师的能力所在。宏观视角以及对整体功能的使用场景的把控和灵活运用的能力，这些能力要建立在已有的功能很熟悉的基础上。他们可能对整个产品的背景都有更充分的了解。</p>
<p>添加功能需求</p>
<p>也做了一些局部的小功能的开发，比如在整个的逻辑控制流中添加一些额外的参数然后传递下去，或者做一些小功能的修补等等。虽说都是很小的地方，但是自己并不做的十全十美，最基本的就是测试不到位，比如自己提交了某个修改之后引入了一个新的bug，在review的时候代码不够整洁等等。说起来也是很小的原因，测试不够细致或者代码上没有严格按照golint的要求完善仔细，但是说白了还是一个专业性的问题，没有能够很稳定的专业的来做事情。</p>
<p>P层产品的思考</p>
<p>P层的产品说实话都是实验性的，市面上也没有一个真正成功的。公司内部用k8s做自己的云纹系统还是妥妥的，但是说到用这个来赚钱或者是卖产品，更多的都是实验性质的。或者说都是用k8s自己包装一个私有云出来卖给别家公司，很难看到差异性。hw这几个月感觉看到了一条路，就是抱I层的大腿。P层说白了就是卖的服务，和p层绑定在一起买是个不错的思路。已有应用和架构上云的话：</p>
<p>一个策略是转容器，让已有应用跑在容器上然后按照容器的玩法进行调度<br>但是对于一些有历史负担的应用 创建虚拟机-&gt;应用跑在虚拟机上 这个流程就是很实际的选择，改动起来历史负担也不会太重。<br>对于hw的话，我觉得产品的技术层面是有这个考虑的，比如p层的一些功能，包括静态纳管以及动态纳管，还是有状态应用的生命周期的支持，这些都是为了上面说的第二点来服务的，实际上在我做接口人的时候，发现很多产品也确实是按照这个思路来使用的，但是怎奈何用户体验做的并不好，颤巍巍一个流程跑下来，出新版本的时候又是一大堆的问题。说白了还是功能实现的时候有问题，代码质量不高，参数校验传递不够细致，CI有问题，测试不全面，等等，诸如此类的问题吧。还有这种场景性和针对性不强，比如没有把已经有的使用方式的模板很好的整理出来，不过我个人觉得在产品战略上，P层的这种玩法还是很有生命力的，与其空中楼阁地建一个门槛很高的容器平台，不如在已有的架构上对接各种I层（特别是公司内部自己的I层）很好地支撑适配，服务好I层，然后在服务好内部产品站稳脚跟的同时在寻找新的机会。</p>
<p>一些额外的体会</p>
<p>以前对于configmap或者secret，虽然说知道他们的主要功能，但是主要的体会并不是很深刻。在公司里大量的应用采用k8s的方式部署，才有点感受。</p>
<p>显而易见的好处就是分类，可以通过configmap的名字来确定不同类别的变量信息，这样会使的程序中的变量更好管理，程序也会更加整洁。如果把各种各样的变量一股脑写早环境变量中，每次修改的时候维护的成本也是很高，特别是变量多的时候，漏掉一个也是常有的事情。<br>secret的不同加解密策略，对于企业级的正规应用，paasword这种参数用明文写在环境变量中毕竟是不安全的，secret的不同类别可以用来指定不同的加解密策略，使用起来也很灵活。<br>总而言之，无论是secret还是configmap都是根据应用启动时候的参数信息进行了更细致的分类，说白了还是用到了程序的分类的思路，这样增加程序的可读性同时也煎减少了程序的维护成本。</p>
<p>“好长时间都没有新的功能需求，我们到底在做什么？”有天大伙儿吃完饭聊天，感叹去年就是验证的这个功能，怎么大半年过去了，每天还是验证的同样的功能，说起来是感到有些沮丧，结果还总是出问题。一来说明了这边产品的迭代速度并不很快，二来说明了好多时候我们反省总结的不是很够，比如除了问题的地方到底是什么原因，日志打印信息不彻底？参数检验不充分？网络有问题？还是什么其他的原因。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/16/HW-story/" data-id="ck9f4z7xl004uaw9dtbbm7o09" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2019/06/22/They-write-blog/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          They write blog
        
      </div>
    </a>
  
  
    <a href="/2019/06/16/API-story/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">API story</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/24/single-core-with-multithreading/">single core with multiprocess</a>
          </li>
        
          <li>
            <a href="/2020/04/23/block-nonblock-sync-nonasync/">block/nonblock,sync/nonasync,event-driven/data-driven</a>
          </li>
        
          <li>
            <a href="/2020/04/19/about-computing-tasks-and-deep-learning-tranning/">about computing tasks and deep learning tranning</a>
          </li>
        
          <li>
            <a href="/2020/04/16/Area-cover/">Area cover</a>
          </li>
        
          <li>
            <a href="/2020/03/03/c-multiple-defination/">c-multiple-defination</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2020 zhe&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;godenwangzhe@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>