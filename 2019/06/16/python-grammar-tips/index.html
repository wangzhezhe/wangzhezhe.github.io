<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>python grammar tips | Wangzhezhe&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录一些python中的基本语法知识点（主要是2.7版本的），总是忘记。">
<meta property="og:type" content="article">
<meta property="og:title" content="python grammar tips">
<meta property="og:url" content="http://yoursite.com/2019/06/16/python-grammar-tips/index.html">
<meta property="og:site_name" content="Wangzhezhe&#39;s Blog">
<meta property="og:description" content="记录一些python中的基本语法知识点（主要是2.7版本的），总是忘记。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-01T21:52:49.072Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python grammar tips">
<meta name="twitter:description" content="记录一些python中的基本语法知识点（主要是2.7版本的），总是忘记。">
  
    <link rel="alternate" href="/atom.xml" title="Wangzhezhe&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-165927341-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Wangzhezhe&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Writing is nature&#39;s way of letting you know how sloppy your thinking is.</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-python-grammar-tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/16/python-grammar-tips/" class="article-date">
  <time datetime="2019-06-16T21:39:23.000Z" itemprop="datePublished">2019-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      python grammar tips
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>记录一些python中的基本语法知识点（主要是2.7版本的），总是忘记。</p>
<a id="more"></a>
<h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><p>布尔值可以用and、or和not运算。and运算是与运算。</p>
<p>or运算是或运算</p>
<p>not运算是非运算</p>
<p>空值是Python里一个特殊的值，用None表示。None不能理解为0，因为0是有意义的，而None是一个特殊的空值</p>
<p>非强类型语言<br>这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错</p>
<p>常量表示<br>所谓常量就是不能变的变量，比如常用的数学常数π就是一个常量。在Python中，通常用全部大写的变量名表示常量</p>
<p>Python支持多种数据类型，在计算机内部，可以把任何数据都看成一个“对象”，而变量就是在程序中用来指向这些数据对象的，对变量赋值就是把数据和变量给关联起来。</p>
<h3 id="编码-格式化输出"><a href="#编码-格式化输出" class="headerlink" title="编码 格式化输出"></a>编码 格式化输出</h3><p>在Python中，采用的格式化方式和C语言是一致的，用占位符%实现，%d整数<br>%f 浮点数 %s 字符串 %x 十六进制整数</p>
<p>Python在后来添加了对Unicode的支持，以Unicode表示的字符串用u’…’表示</p>
<h3 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h3><p>list采用中括号 python内置的一种数据类型是列表：list。list是一种有序的集合，可以随时添加和删除其中的元素</p>
<p>tuple采用小括号 另一种有序列表叫元组：tuple。tuple和list非常类似，但是tuple一旦初始化就不能修改，只有1个元素的tuple定义时必须加一个逗号,，来消除歧义。</p>
<p>list和tuple是Python内置的有序集合，一个可变，一个不可变</p>
<p>dict类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; d = &#123;&apos;Michael&apos;: 95, &apos;Bob&apos;: 75, &apos;Tracy&apos;: 85&#125;</span><br><span class="line">&gt;&gt;&gt; d[&apos;Michael&apos;]</span><br><span class="line">95</span><br></pre></td></tr></table></figure>
<p>避免key-value不存在的方式，一是通过in判断key是否存在：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &apos;Thomas&apos; in d</span><br><span class="line">False</span><br></pre></td></tr></table></figure>
<p>二是通过dict提供的get方法，如果key不存在，可以返回None，或者自己指定的value，get方法就是说，如果key不存在的话，就返回-1。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; d.get(&apos;Thomas&apos;)</span><br><span class="line">&gt;&gt;&gt; d.get(&apos;Thomas&apos;, -1)</span><br><span class="line">-1</span><br></pre></td></tr></table></figure>
<p>要删除一个key，用pop(key)方法，对应的value也会从dict中删除：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; d.pop(&apos;Bob&apos;)</span><br><span class="line">75</span><br><span class="line">&gt;&gt;&gt; d</span><br><span class="line">&#123;&apos;Michael&apos;: 95, &apos;Tracy&apos;: 85&#125;</span><br></pre></td></tr></table></figure>
<p>set和dict类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在set中，没有重复的key。要创建一个set，需要提供一个list作为输入集合：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; s = set([1, 2, 3])</span><br><span class="line">&gt;&gt;&gt; s</span><br><span class="line">set([1, 2, 3])</span><br></pre></td></tr></table></figure>
<p>通过add(key)添加元素通过remove(key)删除元素</p>
<p>基本类型转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; int(&apos;123&apos;)</span><br><span class="line">123</span><br><span class="line">&gt;&gt;&gt; int(12.34)</span><br><span class="line">12</span><br><span class="line">&gt;&gt;&gt; float(&apos;12.34&apos;)</span><br><span class="line">12.34</span><br><span class="line">&gt;&gt;&gt; str(1.23)</span><br><span class="line">&apos;1.23&apos;</span><br><span class="line">&gt;&gt;&gt; unicode(100)</span><br><span class="line">u&apos;100&apos;</span><br><span class="line">&gt;&gt;&gt; bool(1)</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; bool(&apos;&apos;)</span><br><span class="line">False</span><br></pre></td></tr></table></figure>
<p>数据类型检查可以用内置函数isinstance实现</p>
<h3 id="is-与-的区别-比较两个字符串的区别"><a href="#is-与-的区别-比较两个字符串的区别" class="headerlink" title="is 与 == 的区别 比较两个字符串的区别"></a>is 与 == 的区别 比较两个字符串的区别</h3><h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if &lt;条件判断1&gt;:</span><br><span class="line">    &lt;执行1&gt;</span><br><span class="line">elif &lt;条件判断2&gt;:</span><br><span class="line">    &lt;执行2&gt;</span><br><span class="line">elif &lt;条件判断3&gt;:</span><br><span class="line">    &lt;执行3&gt;</span><br><span class="line">else:</span><br><span class="line">    &lt;执行4&gt;</span><br></pre></td></tr></table></figure>
<h3 id="循环方式"><a href="#循环方式" class="headerlink" title="循环方式"></a>循环方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">names = [&apos;Michael&apos;, &apos;Bob&apos;, &apos;Tracy&apos;]</span><br><span class="line">for name in names:</span><br><span class="line">    print name</span><br><span class="line"></span><br><span class="line">sum = 0</span><br><span class="line">n = 99</span><br><span class="line">while n &gt; 0:</span><br><span class="line">    sum = sum + n</span><br><span class="line">    n = n - 2</span><br><span class="line">print sum</span><br></pre></td></tr></table></figure>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="基本定义"><a href="#基本定义" class="headerlink" title="基本定义"></a>基本定义</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def my_abs(x):</span><br><span class="line">    if x &gt;= 0:</span><br><span class="line">        return x</span><br><span class="line">    else:</span><br><span class="line">        return -x</span><br></pre></td></tr></table></figure>
<p>python函数返回的是单一值，但是这个单一值是一个tuple。函数可以同时返回多个值，但其实就是一个tuple</p>
<h4 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def power(x, n=2):</span><br><span class="line">    s = 1</span><br><span class="line">    while n &gt; 0:</span><br><span class="line">        n = n - 1</span><br><span class="line">        s = s * x</span><br><span class="line">    return s</span><br></pre></td></tr></table></figure>
<p>在以上的代码中，当我们调用power(5)时，相当于调用power(5, 2)</p>
<p>默认参数必须放在实际的参数的后面，<br>默认参数必须指向不变对象（默认参数在函数被定义的时候就已经被创建好了）<br>可变参数 与 关键字参数（实际用起来总是不熟悉）<br>定义可变参数和定义list或tuple参数相比，仅仅在参数前面加了一个*号。在函数内部，参数numbers接收到的是一个tuple，因此，函数代码完全不变。但是，调用该函数时，可以传入任意个参数，包括0个参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def calc(*numbers):</span><br><span class="line">    sum = 0</span><br><span class="line">    for n in numbers:</span><br><span class="line">        sum = sum + n * n</span><br><span class="line">    return sum</span><br></pre></td></tr></table></figure>
<p>可变参数允许你传入0个或任意个参数，这些可变参数在函数调用时自动组装为一个tuple</p>
<p>关键字参数允许你传入0个或任意个含参数名的参数，这些关键字参数在函数内部自动组装为一个dict</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def person(name, age, **kw):</span><br><span class="line">    print &apos;name:&apos;, name, &apos;age:&apos;, age, &apos;other:&apos;, kw</span><br></pre></td></tr></table></figure>
<p>函数person除了必选参数name和age外，还接受关键字参数kw。在调用该函数时，可以只传入必选参数，关键参数相当于是以key-value值的形式传入的参数，传入之后自动组成一个dict：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; person(&apos;Michael&apos;, 30)</span><br><span class="line">name: Michael age: 30 other: &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; person(&apos;Bob&apos;, 35, city=&apos;Beijing&apos;)</span><br><span class="line">name: Bob age: 35 other: &#123;&apos;city&apos;: &apos;Beijing&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; person(&apos;Adam&apos;, 45, gender=&apos;M&apos;, job=&apos;Engineer&apos;)</span><br><span class="line">name: Adam age: 45 other: &#123;&apos;gender&apos;: &apos;M&apos;, &apos;job&apos;: &apos;Engineer&apos;&#125;</span><br></pre></td></tr></table></figure>
<p>注意所以，对于任意函数，都可以通过类似func( args, *kw)的形式调用它，无论它的参数是如何定义的，在下面的装饰器语法中，就是这么使用的。</p>
<h3 id="python-装饰器"><a href="#python-装饰器" class="headerlink" title="python 装饰器"></a>python 装饰器</h3><ul>
<li>通过变量可以调用函数</li>
<li>装饰器实际上返回的就是一个高阶函数，就是函数的函数</li>
<li>装饰器通过@的语法生效</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 定义一个可以打印日志的decorator</span><br><span class="line">def log(func):</span><br><span class="line">    # 这里的wrapper可以接受任何的参数</span><br><span class="line">    def wrapper(*args, **kw):</span><br><span class="line">        print &apos;call %s():&apos; % func.__name__</span><br><span class="line">        return func(*args, **kw)</span><br><span class="line">    return wrapper</span><br><span class="line">    </span><br><span class="line"># 在now函数前 放置装饰器 相当于now=log(now)</span><br><span class="line"># now 函数被log装饰器所装饰 返回的now是一个新的now</span><br><span class="line">@log</span><br><span class="line">def now():</span><br><span class="line">    print &apos;2013-12-25&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="python-mysql"><a href="#python-mysql" class="headerlink" title="python mysql"></a>python mysql</h3><p>python-mysql 常见操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 导入MySQL驱动:</span><br><span class="line">&gt;&gt;&gt; import mysql.connector</span><br><span class="line"># 注意把password设为你的root口令:</span><br><span class="line">&gt;&gt;&gt; conn = mysql.connector.connect(user=&apos;root&apos;, password=&apos;password&apos;, database=&apos;test&apos;, use_unicode=True)</span><br><span class="line">&gt;&gt;&gt; cursor = conn.cursor()</span><br><span class="line"># 创建user表:</span><br><span class="line">&gt;&gt;&gt; cursor.execute(&apos;create table user (id varchar(20) primary key, name varchar(20))&apos;)</span><br><span class="line"># 插入一行记录，注意MySQL的占位符是%s:</span><br><span class="line">&gt;&gt;&gt; cursor.execute(&apos;insert into user (id, name) values (%s, %s)&apos;, [&apos;1&apos;, &apos;Michael&apos;])</span><br><span class="line">&gt;&gt;&gt; cursor.rowcount</span><br><span class="line">1</span><br><span class="line"># 提交事务:</span><br><span class="line">&gt;&gt;&gt; conn.commit()</span><br><span class="line">&gt;&gt;&gt; cursor.close()</span><br><span class="line"># 运行查询:</span><br><span class="line">&gt;&gt;&gt; cursor = conn.cursor()</span><br><span class="line">&gt;&gt;&gt; cursor.execute(&apos;select * from user where id = %s&apos;, (&apos;1&apos;,))</span><br><span class="line">&gt;&gt;&gt; values = cursor.fetchall()</span><br><span class="line">&gt;&gt;&gt; values</span><br><span class="line">[(u&apos;1&apos;, u&apos;Michael&apos;)]</span><br><span class="line"># 关闭Cursor和Connection:</span><br><span class="line">&gt;&gt;&gt; cursor.close()</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; conn.close()</span><br></pre></td></tr></table></figure>
<h3 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h3><p>相当于在程序中把db中的数据结构实现一下，常用到的工具就是sqlalchemy。</p>
<p>参考链接<br><a href="http://docs.sqlalchemy.org/en/rel_1_0/core/type_basics.html" target="_blank" rel="noopener">http://docs.sqlalchemy.org/en/rel_1_0/core/type_basics.html</a></p>
<h3 id="python的继承"><a href="#python的继承" class="headerlink" title="python的继承"></a>python的继承</h3><h3 id="Python元类（metaclass）"><a href="#Python元类（metaclass）" class="headerlink" title="Python元类（metaclass）"></a>Python元类（metaclass）</h3><p>经典入门例子：<a href="http://blog.jobbole.com/21351/" target="_blank" rel="noopener">http://blog.jobbole.com/21351/</a></p>
<p>之前还弄java的时候，整理过这个blog，听起来很奇怪，class类，类的类？实际上应该说成元类，即metaclass比较恰当。虽然具体使用方式不同，不过出发点应该都是类似的，就是对类本身的一个更高层次的抽象。</p>
<p>定义了一个类，这个类本身也可以被看成是另一层更高抽象的类（即元类）的实例或者说是定义出来的一个对象。</p>
<p>元类有什么所谓的magic things呢</p>
<ul>
<li>动态的创建类，因为meta class也是一种对象，所以可以像是其他对象一样，在函数中动态的创建。使用class关键字。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">def create_class(name):</span><br><span class="line">    if name==&apos;create_class_a&apos;:</span><br><span class="line">        class A(object):</span><br><span class="line">            pass</span><br><span class="line">        return A</span><br><span class="line">    if name==&apos;create_class_b&apos;:</span><br><span class="line">        class B(object):</span><br><span class="line">            pass</span><br><span class="line">        return B</span><br><span class="line">MyclassA=create_class(&apos;create_class_a&apos;)</span><br><span class="line">print MyclassA</span><br><span class="line">MyclassB=create_class(&apos;create_class_b&apos;)</span><br><span class="line">print MyclassB</span><br><span class="line"># MyclassB本身的类型是一个名为 type 的自建类型</span><br><span class="line">print type(MyclassB)</span><br><span class="line"># MyclassB的一个实例MyclassB()的类型是新创建的__main__.B类型</span><br><span class="line">print type(MyclassB())</span><br><span class="line">print type(&apos;MyclassC&apos;,(),&#123;&#125;)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">output:</span><br><span class="line">&lt;class &apos;__main__.A&apos;&gt;</span><br><span class="line">&lt;class &apos;__main__.B&apos;&gt;</span><br><span class="line">&lt;type &apos;type&apos;&gt;</span><br><span class="line">&lt;class &apos;__main__.B&apos;&gt;</span><br><span class="line">&lt;class &apos;__main__.MyclassC&apos;&gt;</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<p>使用type关键字也可以动态的创建类，通常上，type关键字用来描述一个对象的具体的类型。比如type(类名, 父类的元组（针对继承的情况，可以为空），包含属性的字典（名称和值）)<br>到底什么是元类?元类就是创建类的类。这些类，相当于元类的对象。可以用类比的方式加深理解：str是用来创建字符串对象的类，而int是用来创建整数对象的类。type就是创建类对象的类。</p>
<p>Python中所有的东西，注意，我是指所有的东西——都是对象。这包括整数、字符串、函数以及类。它们全部都是对象，而且它们都是从一个类创建而来。这样倒是容易理解了。于是python中的所有对象都会有class这个属性。</p>
<p>那class的class会是什么呢，就是一个type类型，就像上面的例子中print type(MyclassB)所打印来的一样，type就是Python的内建元类。</p>
<p>元类的一些其他属性</p>
<ul>
<li>metaclass属性 定义一个类的时候，如果其中存在metaclass这个属性，ython会在内存中通过metaclass创建一个名字为类名的类对象，如果不存在，继续向上找，从父类中寻找 metaclass属性 一直到最上层，如果没有找到，就用内建的type来创建类对象。</li>
</ul>
<h3 id="lamda-表达式"><a href="#lamda-表达式" class="headerlink" title="lamda 表达式"></a>lamda 表达式</h3><p>在项目中看到了一个很fancy的表达：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">files = map(lambda f:os.path.normpath(os.path.join(f, &apos;etc&apos;, &apos;sstack&apos;, &apos;sstack.yml.dev&apos;)), sys.path)</span><br></pre></td></tr></table></figure></p>
<p>首先看下map函数，这个有点类似于mapreduce中的map函数。<br>map(function, iterable, …)<br>map函数的功能就是将第一个参数所定义的函数施加到后面的一系列成员中去。有一点是要注意的iterable中的每个成员，会自动的被认为是function函数的形参，传入到函数中<br>在上面的操作中，sys.path返回的是当前python环境下的查找路径，具体来源可以参考这个。</p>
<p>上面的例子可以这样来解释，首先定义一个lambda表达式，表达式的形参为f，lambda函数的功能是把 /etc/sstack/sstack.yml.dev 的路径加入进来。</p>
<p>expression=lambda f:os.path.normpath(os.path.join(f, ‘etc’, ‘sstack’, ‘sstack.yml.dev’))·</p>
<p>之后使用map函数，将后面的每个item中的元素当成形参，传入到lamda函数中，执行对应的操作，之后返回经过处理之后的list：</p>
<p>files = map(expression, sys.path)</p>
<h3 id="python-内置函数"><a href="#python-内置函数" class="headerlink" title="python 内置函数"></a>python 内置函数</h3><p><strong>getattr</strong><br>这个函数多少有点java中反射的意思，Getattr用于返回一个对象属性，或者方法，根据属性的名称，返回对象的值，如果name是对象的属性的名称，则返回对应的属性的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.a = &apos;a&apos;</span><br><span class="line">    def method(self):</span><br><span class="line">        print &quot;method print&quot;</span><br><span class="line">a = A()</span><br><span class="line">print &quot;output 1: &quot;</span><br><span class="line"># instance a contains the element &apos;a&apos; print a</span><br><span class="line">print getattr(a, &apos;a&apos;, &apos;default&apos;)</span><br><span class="line"># instance a do not contain the element &apos;b&apos; print default</span><br><span class="line">print &quot;output 2: &quot;</span><br><span class="line">print getattr(a, &apos;b&apos;, &apos;default&apos;)</span><br><span class="line"># instance a contain the function &apos;method&apos; return the address of function</span><br><span class="line">print &quot;output 3: &quot;</span><br><span class="line">print getattr(a, &apos;method&apos;, &apos;default&apos;)</span><br><span class="line"># instance a contain the function &apos;method&apos; return that function to value</span><br><span class="line"># use value() to invoke the function and print it</span><br><span class="line">print &quot;output 4:&quot;</span><br><span class="line">value=getattr(a, &apos;method&apos;, &apos;default&apos;)</span><br><span class="line">value()</span><br><span class="line">&quot;&quot;&quot;&quot;</span><br><span class="line">output:</span><br><span class="line">output 1: </span><br><span class="line">a</span><br><span class="line">output 2: </span><br><span class="line">default</span><br><span class="line">output 3: </span><br><span class="line">&lt;bound method A.method of &lt;__main__.A instance at 0x7f9bcf896a70&gt;&gt;</span><br><span class="line">output 4:</span><br><span class="line">method print</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<h3 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h3><p>learn python step by step 的比较好的tutorial</p>
<p><a href="https://intermediate-and-advanced-software-carpentry.readthedocs.io/en/latest/day2.html" target="_blank" rel="noopener">https://intermediate-and-advanced-software-carpentry.readthedocs.io/en/latest/day2.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/16/python-grammar-tips/" data-id="ckgsweuzq0040w2s64p5sqb5h" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2019/06/16/ALA-story/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          ALA story
        
      </div>
    </a>
  
  
    <a href="/2019/06/16/python-in-action/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">python in action</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本类型"><span class="toc-number">1.</span> <span class="toc-text">基本类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编码-格式化输出"><span class="toc-number">2.</span> <span class="toc-text">编码 格式化输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本结构"><span class="toc-number">3.</span> <span class="toc-text">基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-与-的区别-比较两个字符串的区别"><span class="toc-number">4.</span> <span class="toc-text">is 与 == 的区别 比较两个字符串的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件判断"><span class="toc-number">5.</span> <span class="toc-text">条件判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#循环方式"><span class="toc-number">6.</span> <span class="toc-text">循环方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">7.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本定义"><span class="toc-number">7.1.</span> <span class="toc-text">基本定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认参数"><span class="toc-number">7.2.</span> <span class="toc-text">默认参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-装饰器"><span class="toc-number">8.</span> <span class="toc-text">python 装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-mysql"><span class="toc-number">9.</span> <span class="toc-text">python mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM"><span class="toc-number">10.</span> <span class="toc-text">ORM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python的继承"><span class="toc-number">11.</span> <span class="toc-text">python的继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python元类（metaclass）"><span class="toc-number">12.</span> <span class="toc-text">Python元类（metaclass）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lamda-表达式"><span class="toc-number">13.</span> <span class="toc-text">lamda 表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-内置函数"><span class="toc-number">14.</span> <span class="toc-text">python 内置函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reference"><span class="toc-number">15.</span> <span class="toc-text">reference</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2020 zhe&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;godenwangzhe@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>