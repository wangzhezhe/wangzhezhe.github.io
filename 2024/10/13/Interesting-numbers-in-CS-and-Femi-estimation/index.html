<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Interesting numbers in CS and Femi estimation (WIP) | AverageMind</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="There are some important numbers in CS, and remembering the level of these numbers can provide a more in-depth understanding of the computing system. 人是万物的尺度。对这些数字最好有个概念，就知道能处理的问题的量级是多少了，在书写项目书，指定相关指标">
<meta property="og:type" content="article">
<meta property="og:title" content="Interesting numbers in CS and Femi estimation (WIP)">
<meta property="og:url" content="http://yoursite.com/2024/10/13/Interesting-numbers-in-CS-and-Femi-estimation/index.html">
<meta property="og:site_name" content="AverageMind">
<meta property="og:description" content="There are some important numbers in CS, and remembering the level of these numbers can provide a more in-depth understanding of the computing system. 人是万物的尺度。对这些数字最好有个概念，就知道能处理的问题的量级是多少了，在书写项目书，指定相关指标">
<meta property="og:locale">
<meta property="article:published_time" content="2024-10-13T14:35:51.000Z">
<meta property="article:modified_time" content="2025-01-19T11:38:08.775Z">
<meta property="article:author" content="zhe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="AverageMind" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  
<link rel="stylesheet" href="/css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-165927341-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
<!-- Google adds -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5642436380582343"
     crossorigin="anonymous">
</script>
<!-- End Google adds -->




<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">AverageMind</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Interesting-numbers-in-CS-and-Femi-estimation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/10/13/Interesting-numbers-in-CS-and-Femi-estimation/" class="article-date">
  <time datetime="2024-10-13T14:35:51.000Z" itemprop="datePublished">2024-10-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/methodology/">methodology</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Interesting numbers in CS and Femi estimation (WIP)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>There are some important numbers in CS, and remembering the level of these numbers can provide a more in-depth understanding of the computing system.</p>
<p>人是万物的尺度。对这些数字最好有个概念，就知道能处理的问题的量级是多少了，在书写项目书，指定相关指标的时候就能比较合理的进行估计。有了这些估计，我们可以用费曼估计法去快速推算一些比较复杂的问题。然后还能更好地理解计算机设备直接的unbalance的特性。</p>
<p>很多时候我们仅仅需要的是快速的量级的估计而不是精确的数字，这些问题都属于Feimi 估计的思路，比如最经典的某个城市大概有多少钢琴调音师等等。</p>
<span id="more"></span>

<p>最近发现，项目书或者指标层面，对于数据的把握变得比较关键，写指标的时候通常想让这个指标可以量化，没有这些指标的概念，一些关键任务的项目书都没法去写了，从paper的角度上看，关键指标的提升更是paper的core contribution.</p>
<h3 id="Computing"><a href="#Computing" class="headerlink" title="Computing"></a>Computing</h3><h3 id="Memory-access"><a href="#Memory-access" class="headerlink" title="Memory access"></a>Memory access</h3><p>CPU cache read&#x2F;write access. 不同的CPU和不同的Cache当然速度不同，这里有一张表格 <a target="_blank" rel="noopener" href="https://www.quora.com/How-fast-can-the-L1-cache-of-a-CPU-reach">https://www.quora.com/How-fast-can-the-L1-cache-of-a-CPU-reach</a> L1 大概是2000GB&#x2F;s的样子。L3大概是 200GB&#x2F;s的样子，L3相比较RAM大概又有100倍的差距了。</p>
<p>RAM (Random access memory) read&#x2F;write speed. RAM using a little bit different metric, it is called MHZ rating (how many times per second your RAM can access its memory). nowadays, this value is usually from 2400Mhz to 4400Mhz, which is 10 times faster than SSD I&#x2F;O speed. 就是说1s大概能access 2400M  到 4400M 次，每次修改1B的数据的话，就是2400MB-4400MB左右。</p>
<p>SSD 通常所说的固态硬盘，read&#x2F;write speed 200MB&#x2F;s to 550MB&#x2F;s。</p>
<p>HDD (hard disk) 通常所说的细节硬盘 read&#x2F;write speed, from 80MB&#x2F;s to 160MB&#x2F;s</p>
<p>If we assume one picture taken by phone is around 2MB, SSD can transfer at least 100 photos per second and HDD can only transfer 40 photos. </p>
<p>从所花费的instruction time来看，disk I&#x2F;O takes 5-10 ms, which is millions of instruction time (1000,000) Flash storage takes 10-100us, NVM may take 1us, which is still around 2000-3000 instruction times. 通常的3GHz的CPU, 1s 可以执行 <code>3*10^9</code> 个指令，一个instruction time 大概是<code>0.003us</code></p>
<h3 id="Memory-size"><a href="#Memory-size" class="headerlink" title="Memory size"></a>Memory size</h3><h3 id="Networking"><a href="#Networking" class="headerlink" title="Networking"></a>Networking</h3><p>从所花费的指令时间来看，在datacenter中，round-trip message 可以话费10-50us, 相当于n0,000的指令时间。wide area round trip 时间可能更长，要花费到10-100ms的时间。<br>(A philosophy of software design)</p>
<h3 id="并行计算"><a href="#并行计算" class="headerlink" title="并行计算"></a>并行计算</h3><p>大模型训练通常是万卡的级别，一个node 4-8张GPU的话，就是1250到2500个节点的数据中心的规模。一个机柜上下两层 （比如就像通常的衣柜那么大）通常可以放128 node (比如Frontier)，那这个数据空间所需要的地方至少是10-20个机柜所占用的空间。</p>
<p>并行可视化的服务比较大的规模(比如VTK-m论文中所描述的) 最大在37,000个AMD GPU上进行了验证(2023年)，这可能是目前这个小领域最大的规模了。换成节点的话大概是9400多个节点，这就是目前的state of the art的级别。</p>
<p>超算相关的项目里面，E级的超算项目就是10^18次方，新闻里有时候介绍说，我们的峰值时候计算能力为是百亿亿次浮点运算，这就是说这个机器是E级超算的机器。</p>
<p>中文中所说的1亿就是10^8，如果10^9在中文里就是10亿，就是1后面跟着9个0。对应网格之类的数据规模的话就是1000^3的结构化网格或者点。</p>
<h3 id="Image-size-and-pixel"><a href="#Image-size-and-pixel" class="headerlink" title="Image size and pixel"></a>Image size and pixel</h3><p>假如手机分辨率是<code>2600*1200</code>那整个屏幕的像素是<code>3,120,000</code> 312万像素，拍一个照片的话，通常一个像素点是RGBA 4通道，一个通道用8bit（1Byte），4个通道就是4B，整个照片就是 <code>3120000*4/1024/1024=11.9MB</code> 大概是12MB。128GB的内存的话，大概就是存10922张，就是万张照片的数量级别。</p>
<p>比如做feimi估算的话，不提供额外的信息，就问一个目前市面上常见的手机大概能存多少照片？</p>
<p>参考的答案可以如下，快速估算，用1000来近似1024的话，比如128GB的存储空间，一个照片假设是<code>1000*1000</code>的分辨率，也就是10^6 像素点，然后一个像素点用RGBA 4通道，一个通道8bit表示，就是1Byte，一个像素4通道就是4Byte，一个照片就是<code>4*10^6</code>Byte 大概4MB的样子，<code>128*1000/4 = 32000</code> 这就能很快得到量级，大概是万张的级别。</p>
<h3 id="Render-numbers"><a href="#Render-numbers" class="headerlink" title="Render numbers"></a>Render numbers</h3><p>一般FPS在40-60，眼睛看上去才没有很明显的卡顿的感觉。按照这个数字的话，render出一个图片的时间大概是20-30ms左右的时间才能有所谓的实时性的感觉。</p>
<h3 id="大模型的参数量和显存"><a href="#大模型的参数量和显存" class="headerlink" title="大模型的参数量和显存"></a>大模型的参数量和显存</h3><p>Sugon的Z系列的DCU是16GB，4080是24GB。如果一个8Billion参数的基本的大模型，即<code>8,000,000,000</code> 数量级别的话就是8G左右，一个参数如果是16bit的浮点数的话就是2B，所以一个大模型占用的现存空间就至少是16GB，所以DCU基本上是无法部署像样的大模型的，除非用了一些模型压缩的算法。比如ollam中的8B参数的大模型实际占用的存储空间大概是4GB的样子。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2024/10/13/Interesting-numbers-in-CS-and-Femi-estimation/" data-id="cm2a0xf46001ydvjr6mo24wj3" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
 
<script src="/jquery/jquery.min.js"></script>

  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2024/10/17/LLM-tips/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          LLM tips
        
      </div>
    </a>
  
  
    <a href="/2024/09/07/Many-faces-of-2d-image-visualization/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Many faces of 2d image visualization</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Computing"><span class="toc-number">1.</span> <span class="toc-text">Computing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memory-access"><span class="toc-number">2.</span> <span class="toc-text">Memory access</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memory-size"><span class="toc-number">3.</span> <span class="toc-text">Memory size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Networking"><span class="toc-number">4.</span> <span class="toc-text">Networking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97"><span class="toc-number">5.</span> <span class="toc-text">并行计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-size-and-pixel"><span class="toc-number">6.</span> <span class="toc-text">Image size and pixel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Render-numbers"><span class="toc-number">7.</span> <span class="toc-text">Render numbers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E9%87%8F%E5%92%8C%E6%98%BE%E5%AD%98"><span class="toc-number">8.</span> <span class="toc-text">大模型的参数量和显存</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2025 zhe&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;godenwangzhe@gmail.com
    </div>
  </div>
</footer>
 
<script src="/jquery/jquery.min.js"></script>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  



 
<script src="/js/is.js"></script>



  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/elevator.js"></script>

  </div>
</body>
</html>